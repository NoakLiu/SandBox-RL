# SandGraphX

<div align="center">
  <img src="assets/logo.png" alt="SandGraphX Logo" width="200"/>
</div>

SandGraphX æ˜¯ä¸€ä¸ªåŸºäºç¯å¢ƒå­é›†ï¼ˆEnvironment Subsetsï¼‰æŠ½è±¡å’Œä¼˜åŒ–ç›®æ ‡ï¼ˆOptimization Goalï¼‰çš„æ™ºèƒ½ä¼˜åŒ–æ¡†æ¶ã€‚å®ƒé€šè¿‡ SandBox Workflow Graph æ¥åè°ƒ LLM å†³ç­–å’Œ å¹¶ä½¿ç”¨RL å¯¹äºLLMè¿›è¡Œæƒé‡æ›´æ–°ï¼Œå®ç°å¤æ‚ä»»åŠ¡çš„è‡ªåŠ¨åŒ–ä¼˜åŒ–ã€‚

## ğŸŒŸ æ ¸å¿ƒæ¦‚å¿µ

### 1. ç¯å¢ƒå­é›†ï¼ˆEnvironment Subsetsï¼‰
- å°†å¤æ‚ç¯å¢ƒåˆ†è§£ä¸ºå¯ç®¡ç†çš„å­é›†
- æ¯ä¸ªå­é›†éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ SandBox
- æ”¯æŒè‡ªå®šä¹‰çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´
- æä¾›æ ‡å‡†åŒ–çš„æ‰§è¡Œå’Œè¯„ä¼°æ¥å£

### 2. ä¼˜åŒ–ç›®æ ‡ï¼ˆOptimization Goalï¼‰
- å®šä¹‰ä»»åŠ¡çš„å…·ä½“ä¼˜åŒ–ç›®æ ‡
- å¯ä»¥æ˜¯å•ä¸€ç›®æ ‡æˆ–å¤šç›®æ ‡ä¼˜åŒ–
- æ”¯æŒè‡ªå®šä¹‰è¯„åˆ†å‡½æ•°
- æä¾›ç›®æ ‡è¾¾æˆåº¦çš„é‡åŒ–è¯„ä¼°

### 3. SandBox Workflow Graph
- å°†ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ª SandBox èŠ‚ç‚¹
- é€šè¿‡æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ç»„ç»‡èŠ‚ç‚¹å…³ç³»
- æ”¯æŒå¹¶è¡Œå’Œä¸²è¡Œæ‰§è¡Œ
- å®ç°èŠ‚ç‚¹é—´çš„çŠ¶æ€ä¼ é€’å’Œç»“æœèšåˆ

### 4. æ™ºèƒ½å†³ç­–ç³»ç»Ÿ
- **RL æƒé‡æ›´æ–°**ï¼šä¼˜åŒ–å†³ç­–ç­–ç•¥
- **çŠ¶æ€ç®¡ç†**ï¼šè¿½è¸ªå’Œæ›´æ–°ç³»ç»ŸçŠ¶æ€
- **ä¸LLMå’Œèµ„æºåˆ†ç¦»äº¤äº’**ï¼šSandBoxä½œä¸ºworkflow graphèŠ‚ç‚¹ä¸LLMï¼ˆè®¡ç®—ï¼‰,RL(LLM Weight Update)å’ŒComputational Resources (GPU, CPU, etc)éš”ç»ï¼ŒSandGraphXå¯¹åä¸¤è€…å…¨å±€æ‰˜ç®¡ã€‚

<div align="center">
  <img src="assets/archi.jpeg" alt="SandGraphX Architecture" width="800"/>
</div>

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **å®˜æ–¹MCPé›†æˆ**ï¼šåŸºäº Anthropic çš„å®˜æ–¹ MCP Python SDK
- **æ²™ç›’ç¯å¢ƒ**ï¼šéµå¾ª InternBootCamp æ¨¡å¼çš„æ ‡å‡†åŒ–ä»»åŠ¡ç¯å¢ƒ
- **å·¥ä½œæµå›¾**ï¼šæ”¯æŒSandbox DAG Workflow
- **æ ‡å‡†åŒ–é€šä¿¡**ï¼šä½¿ç”¨å®˜æ–¹ MCP åè®®è¿›è¡Œ Sandboxé€šä¿¡ä¸LLMè¿›è¡Œè®¡ç®—
- **å¤šç§ä½¿ç”¨åœºæ™¯**ï¼šä»å•ä¸€æ²™ç›’(single node)æ‰§è¡Œåˆ°å¤æ‚å¤šé˜¶æ®µ(multiple node, large DAGs)å·¥ä½œæµ
- **ç”Ÿæ€ç³»ç»Ÿå…¼å®¹**ï¼šä¸ Claude Desktopã€Cursorã€Windsurf ç­‰ MCP å®¢æˆ·ç«¯å…¼å®¹
- **åŠ¨æ€å·¥ä½œæµå¼•æ“**ï¼šæ”¯æŒå¤æ‚çš„DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰å·¥ä½œæµï¼Œå®ç°å¤šèŠ‚ç‚¹åä½œ
- **æ™ºèƒ½çŠ¶æ€ç®¡ç†**ï¼šæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°å’ŒçŠ¶æ€è¿½è¸ª
- **æ²™ç›’(SandBox)ç¯å¢ƒé›†æˆ**ï¼šæä¾›æ ‡å‡†åŒ–çš„æ²™ç›’ç¯å¢ƒï¼Œç”¨äºä»»åŠ¡æ‰§è¡Œå’ŒéªŒè¯
- **èµ„æºç®¡ç†ç³»ç»Ÿ**ï¼šèµ„æºï¼ˆèƒ½é‡ã€ä»¤ç‰Œã€æ—¶é—´ã€çŸ¥è¯†ï¼‰ç®¡ç†æœºåˆ¶
- **è‡ªé€‚åº”å†³ç­–**ï¼šæ”¯æŒåŸºäºå†å²ä¿¡æ¯å’Œå½“å‰çŠ¶æ€çš„æ™ºèƒ½å†³ç­–
- **å¯æ‰©å±•æ¶æ„**ï¼šæ˜“äºæ·»åŠ æ–°çš„èŠ‚ç‚¹ç±»å‹å’ŒåŠŸèƒ½æ¨¡å—

## ğŸ“ æ–‡ä»¶ç»“æ„

```
SandGraphX/
â”œâ”€â”€ sandgraph/                    # æ ¸å¿ƒåŒ…ç›®å½•
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ workflow.py          # åŸºç¡€å·¥ä½œæµå®ç°
â”‚   â”‚   â”œâ”€â”€ sg_workflow.py       # SandGraphå·¥ä½œæµå®ç°
â”‚   â”‚   â”œâ”€â”€ dag_manager.py       # DAGå›¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ llm_interface.py     # LLMæ¥å£
â”‚   â”‚   â”œâ”€â”€ sandbox.py           # æ²™ç›’åŸºç¡€ç±»
â”‚   â”‚   â”œâ”€â”€ rl_framework.py      # å¼ºåŒ–å­¦ä¹ æ¡†æ¶
â”‚   â”‚   â””â”€â”€ rl_algorithms.py     # å¼ºåŒ–å­¦ä¹ ç®—æ³•
â”‚   â”œâ”€â”€ sandbox_implementations.py # æ²™ç›’å®ç°
â”‚   â””â”€â”€ examples.py              # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ demo/                        # ç¤ºä¾‹ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ sandbox_optimization.py  # æ²™ç›’ä¼˜åŒ–ç¤ºä¾‹
â”‚   â”œâ”€â”€ trading_demo.py         # äº¤æ˜“ç³»ç»Ÿç¤ºä¾‹
â”‚   â”œâ”€â”€ sg_workflow_demo.py     # å·¥ä½œæµæ¼”ç¤º
â”‚   â”œâ”€â”€ rl_demo.py              # å¼ºåŒ–å­¦ä¹ æ¼”ç¤º
â”‚   â”œâ”€â”€ dag_sandbox_demo.py     # DAGæ²™ç›’æ¼”ç¤º
â”‚   â”œâ”€â”€ dag_workflow_demo.py    # DAGå·¥ä½œæµæ¼”ç¤º
â”‚   â”œâ”€â”€ real_llm_demo.py        # çœŸå®LLMæ¼”ç¤º
â”‚   â”œâ”€â”€ demo.py                 # åŸºç¡€æ¼”ç¤º
â”‚   â”œâ”€â”€ interaction_demo.py     # äº¤äº’æ¼”ç¤º
â”‚   â”œâ”€â”€ internbootcamp_demo.py  # InternBootcampæ¼”ç¤º
â”‚   â”œâ”€â”€ internbootcamp_mcp_server.py # InternBootcamp MCPæœåŠ¡å™¨
â”‚   â””â”€â”€ mcp_server_example.py   # MCPæœåŠ¡å™¨ç¤ºä¾‹
â””â”€â”€ setup.py                     # å®‰è£…é…ç½®
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SandGraph Core                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Workflow   â”‚   SandBox   â”‚    LLM      â”‚     RL      â”‚
â”‚   Engine    â”‚  Manager    â”‚  Manager    â”‚  Manager    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚             â”‚
       â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DAG Nodes  â”‚ â”‚ Environment â”‚ â”‚  Decision   â”‚ â”‚  Weight     â”‚
â”‚             â”‚ â”‚  Subsets    â”‚ â”‚  Making     â”‚ â”‚  Updates    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚             â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SandGraphX Manager                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ç”¨æˆ·è¾“å…¥ï¼šç¯å¢ƒå­é›†å®šä¹‰å’Œä¼˜åŒ–ç›®æ ‡                          â”‚
â”‚  â€¢ å·¥ä½œæµï¼šDAGå›¾æ„å»ºä¸æ‰§è¡Œç®¡ç†                              â”‚
â”‚  â€¢ ä¼˜åŒ–ï¼šLLMå†³ç­–ä¼˜åŒ–ä¸RLæƒé‡æ›´æ–°                            â”‚
â”‚  â€¢ èµ„æºï¼šå…¨å±€èµ„æºç®¡ç†ä¸SandBoxéš”ç¦»                          â”‚
â”‚  â€¢ ç›‘æ§ï¼šæ‰§è¡ŒçŠ¶æ€è¿½è¸ªä¸æ€§èƒ½åˆ†æ                              â”‚
â”‚  â€¢ æ‰©å±•ï¼šæ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹å’Œä¼˜åŒ–ç­–ç•¥                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„è¯´æ˜

1. **æ ¸å¿ƒå±‚**
   - Workflow Engine: ç®¡ç†å·¥ä½œæµæ‰§è¡Œå’ŒèŠ‚ç‚¹è°ƒåº¦
   - SandBox Manager: ç®¡ç†ç¯å¢ƒå­é›†å’ŒçŠ¶æ€è½¬æ¢
   - LLM Manager: å¤„ç†å†³ç­–ç”Ÿæˆå’Œç­–ç•¥ä¼˜åŒ–
   - RL Manager: è´Ÿè´£æƒé‡æ›´æ–°å’Œç­–ç•¥æ”¹è¿›

2. **èŠ‚ç‚¹å±‚**
   - DAG Nodes: å·¥ä½œæµä¸­çš„è®¡ç®—èŠ‚ç‚¹
   - Environment Subsets: ç¯å¢ƒå­é›†å®ç°
   - Decision Making: LLMå†³ç­–èŠ‚ç‚¹
   - Weight Updates: RLæƒé‡æ›´æ–°èŠ‚ç‚¹

3. **ç®¡ç†å±‚**
   - ç”¨æˆ·è¾“å…¥å¤„ç†ï¼šæ¥æ”¶ç¯å¢ƒå­é›†å®šä¹‰å’Œä¼˜åŒ–ç›®æ ‡
   - å·¥ä½œæµç®¡ç†ï¼šæ„å»ºå’Œæ‰§è¡ŒDAGå›¾
   - ä¼˜åŒ–æ§åˆ¶ï¼šåè°ƒLLMå’ŒRLçš„ä¼˜åŒ–è¿‡ç¨‹
   - èµ„æºéš”ç¦»ï¼šç¡®ä¿SandBoxä¸å…¨å±€èµ„æºåˆ†ç¦»
   - çŠ¶æ€ç›‘æ§ï¼šè¿½è¸ªæ‰§è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡
   - æ‰©å±•æ”¯æŒï¼šæä¾›è‡ªå®šä¹‰èŠ‚ç‚¹å’Œç­–ç•¥çš„æ¥å£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®šä¹‰ç¯å¢ƒå­é›†
```python
from sandgraph import SandBox

class MyEnvironment(SandBox):
    def __init__(self):
        super().__init__()
        self.state_space = {...}  # å®šä¹‰çŠ¶æ€ç©ºé—´
        self.action_space = {...}  # å®šä¹‰åŠ¨ä½œç©ºé—´
    
    def execute(self, action):
        # å®ç°ç¯å¢ƒæ‰§è¡Œé€»è¾‘
        return next_state, reward, done
    
    def get_state(self):
        # è¿”å›å½“å‰çŠ¶æ€
        return self.current_state
```

### 2. å®šä¹‰ä¼˜åŒ–ç›®æ ‡
```python
def optimization_goal(state, action, next_state):
    # å®ç°ä¼˜åŒ–ç›®æ ‡å‡½æ•°
    score = calculate_score(state, action, next_state)
    return score
```

### 3. åˆ›å»ºå·¥ä½œæµ
```python
from sandgraph import SG_Workflow, NodeType

# åˆ›å»ºLLMç®¡ç†å™¨
llm_manager = create_shared_llm_manager("my_llm")

# åˆ›å»ºå·¥ä½œæµ
workflow = SG_Workflow("my_workflow", WorkflowMode.TRADITIONAL, llm_manager)

# æ·»åŠ èŠ‚ç‚¹
workflow.add_node(NodeType.SANDBOX, "env", {"sandbox": MyEnvironment()})
workflow.add_node(NodeType.LLM, "decision", {"role": "å†³ç­–å™¨"})
workflow.add_node(NodeType.RL, "optimizer", {"algorithm": "PPO"})

# è¿æ¥èŠ‚ç‚¹
workflow.add_edge("env", "decision")
workflow.add_edge("decision", "optimizer")
workflow.add_edge("optimizer", "env")

# æ‰§è¡Œå·¥ä½œæµ
result = workflow.execute_full_workflow()
```

## ğŸ“¦ å®‰è£…

### ä½¿ç”¨ Conda å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. åˆ›å»ºæ–°çš„ conda ç¯å¢ƒ
conda create -n sandgraph python=3.11
conda activate sandgraph

# 2. å…‹éš†ä»“åº“
git clone https://github.com/NoakLiu/sandgraph.git
cd sandgraph

# 3. è¿è¡Œå®‰è£…è„šæœ¬
chmod +x quick_install.sh
./quick_install.sh
```

<!-- ### éªŒè¯å®‰è£…

```bash
# éªŒè¯ MCP SDK
python -c "from mcp.server.fastmcp import FastMCP; print('MCP SDK å®‰è£…æˆåŠŸ')"

# éªŒè¯ SandGraph
python -c "from sandgraph import check_mcp_availability; print(check_mcp_availability())"
``` -->

<!-- ### æ³¨æ„äº‹é¡¹

1. ç¡®ä¿ä½¿ç”¨ Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
2. å»ºè®®ä½¿ç”¨ conda ç¯å¢ƒä»¥é¿å…ä¾èµ–å†²çª
3. å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œè¯·ç¡®ä¿ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè€Œä¸æ˜¯ root ç”¨æˆ·
4. å®‰è£…å®Œæˆåï¼Œæ¯æ¬¡ä½¿ç”¨å‰éƒ½éœ€è¦æ¿€æ´»ç¯å¢ƒï¼š`conda activate sandgraph`

## ğŸ“š ç¤ºä¾‹åœºæ™¯

### 1. æ¸¸æˆåˆ†æç³»ç»Ÿ
- çŠ¶æ€åˆ†æ
- ç­–ç•¥ç”Ÿæˆ
- é£é™©è¯„ä¼°
- èµ„æºä¼˜åŒ–

### 2. åŠ¨æ€å†³ç­–ç³»ç»Ÿ
- çŠ¶æ€åˆ†æ
- ç­–ç•¥ç”Ÿæˆ
- é£é™©è¯„ä¼°
- å†³ç­–æ‰§è¡Œ

### 3. é‡åŒ–äº¤æ˜“ç³»ç»Ÿ
- å¸‚åœºæ•°æ®åˆ†æ
- äº¤æ˜“ç­–ç•¥ç”Ÿæˆ
- å®æ—¶äº¤æ˜“æ‰§è¡Œ
- é£é™©æ§åˆ¶
- æŠ•èµ„ç»„åˆç®¡ç†

### 4. ç¤¾äº¤ç½‘ç»œåˆ†æ
- ä¿¡æ¯ä¼ æ’­å»ºæ¨¡
- å½±å“åŠ›åˆ†æ
- ç¤¾åŒºå‘ç°
- è¶‹åŠ¿é¢„æµ‹

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°èŠ‚ç‚¹ç±»å‹
1. å®šä¹‰èŠ‚ç‚¹å±æ€§
2. å®ç°çŠ¶æ€æ›´æ–°é€»è¾‘
3. æ³¨å†Œåˆ°å·¥ä½œæµç³»ç»Ÿ

### è‡ªå®šä¹‰å·¥ä½œæµ
1. å®šä¹‰èŠ‚ç‚¹ç»“æ„
2. è®¾ç½®èŠ‚ç‚¹ä¾èµ–
3. é…ç½®æ‰§è¡Œå‚æ•° -->

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è”ç³»æ–¹å¼

- é‚®ä»¶è”ç³» - dong.liu.dl2367@yale.edu
