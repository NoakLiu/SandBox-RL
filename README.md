# SandGraphX

**SandGraphX** åŸºäºå¯¹äºenvironment subsetsçš„æŠ½è±¡ï¼ˆSandBoxï¼‰å’Œæœ€ç»ˆçš„ä¼˜åŒ–ç›®æ ‡ï¼ˆOptimization Goalï¼‰çš„ä¼˜åŒ–æ¡†æ¶ï¼Œè¯¥æ¡†æ¶ä¼šåŸºäºSandBox Workflow Graphè¿›è¡Œè®¡ç®—ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **å®˜æ–¹MCPé›†æˆ**ï¼šåŸºäº Anthropic çš„å®˜æ–¹ MCP Python SDK
- **æ²™ç›’ç¯å¢ƒ**ï¼šéµå¾ª Game24bootcamp æ¨¡å¼çš„æ ‡å‡†åŒ–ä»»åŠ¡ç¯å¢ƒ
- **å·¥ä½œæµå›¾**ï¼šæ”¯æŒå¤æ‚ LLM-Sandboxäº¤äº’çš„ DAG æ‰§è¡Œå¼•æ“
- **æ ‡å‡†åŒ–é€šä¿¡**ï¼šä½¿ç”¨å®˜æ–¹ MCP åè®®è¿›è¡Œ LLM-Sandboxé€šä¿¡
- **å¤šç§ä½¿ç”¨åœºæ™¯**ï¼šä»å•ä¸€æ²™ç›’æ‰§è¡Œåˆ°å¤æ‚å¤šé˜¶æ®µå·¥ä½œæµ
- **ç”Ÿæ€ç³»ç»Ÿå…¼å®¹**ï¼šä¸ Claude Desktopã€Cursorã€Windsurf ç­‰ MCP å®¢æˆ·ç«¯å…¼å®¹
- **åŠ¨æ€å·¥ä½œæµå¼•æ“**ï¼šæ”¯æŒå¤æ‚çš„DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰å·¥ä½œæµï¼Œå®ç°å¤šèŠ‚ç‚¹åä½œ
- **æ™ºèƒ½çŠ¶æ€ç®¡ç†**ï¼šæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°å’ŒçŠ¶æ€è¿½è¸ª
- **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šæ”¯æŒå¤šä¸ªLLMæ™ºèƒ½ä½“ä¹‹é—´çš„åä½œä¸é€šä¿¡
- **æ²™ç›’ç¯å¢ƒé›†æˆ**ï¼šæä¾›æ ‡å‡†åŒ–çš„æ²™ç›’ç¯å¢ƒï¼Œç”¨äºä»»åŠ¡æ‰§è¡Œå’ŒéªŒè¯
- **èµ„æºç®¡ç†ç³»ç»Ÿ**ï¼šå†…ç½®èµ„æºï¼ˆèƒ½é‡ã€ä»¤ç‰Œã€æ—¶é—´ã€çŸ¥è¯†ï¼‰ç®¡ç†æœºåˆ¶
- **è‡ªé€‚åº”å†³ç­–**ï¼šæ”¯æŒåŸºäºå†å²ä¿¡æ¯å’Œå½“å‰çŠ¶æ€çš„æ™ºèƒ½å†³ç­–
- **å¯æ‰©å±•æ¶æ„**ï¼šæ˜“äºæ·»åŠ æ–°çš„èŠ‚ç‚¹ç±»å‹å’ŒåŠŸèƒ½æ¨¡å—

## ğŸ“ æ–‡ä»¶ç»“æ„

```
SandGraph/
â”œâ”€â”€ sandgraph/                    # æ ¸å¿ƒåŒ…ç›®å½•
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ workflow.py          # åŸºç¡€å·¥ä½œæµå®ç°
â”‚   â”‚   â”œâ”€â”€ sg_workflow.py       # SandGraphå·¥ä½œæµå®ç°
â”‚   â”‚   â”œâ”€â”€ dag_manager.py       # DAGå›¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ llm_interface.py     # LLMæ¥å£
â”‚   â”‚   â”œâ”€â”€ sandbox.py           # æ²™ç›’åŸºç¡€ç±»
â”‚   â”‚   â”œâ”€â”€ rl_framework.py      # å¼ºåŒ–å­¦ä¹ æ¡†æ¶
â”‚   â”‚   â””â”€â”€ rl_algorithms.py     # å¼ºåŒ–å­¦ä¹ ç®—æ³•
â”‚   â”œâ”€â”€ sandbox_implementations.py # æ²™ç›’å®ç°
â”‚   â””â”€â”€ examples.py              # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ sg_workflow_demo.py          # å·¥ä½œæµæ¼”ç¤º
â”œâ”€â”€ rl_demo.py                   # å¼ºåŒ–å­¦ä¹ æ¼”ç¤º
â””â”€â”€ setup.py                     # å®‰è£…é…ç½®
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SandGraph Core                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Workflow   â”‚   State     â”‚   Resource  â”‚   Decision  â”‚
â”‚   Engine    â”‚  Manager    â”‚  Manager    â”‚   Engine    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚             â”‚
       â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM Nodes â”‚ â”‚ Sandbox     â”‚ â”‚ Resource    â”‚ â”‚ Decision    â”‚
â”‚             â”‚ â”‚ Nodes       â”‚ â”‚ Nodes       â”‚ â”‚ Nodes       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. åŠ¨æ€å·¥ä½œæµç³»ç»Ÿ
- æ”¯æŒå¤æ‚çš„å¤šèŠ‚ç‚¹å·¥ä½œæµ
- èŠ‚ç‚¹é—´çŠ¶æ€ä¼ é€’å’Œä¾èµ–ç®¡ç†
- çµæ´»çš„å·¥ä½œæµå®šä¹‰å’Œæ‰§è¡Œ

### 2. æ™ºèƒ½èŠ‚ç‚¹ç±»å‹
- **åˆ†æèŠ‚ç‚¹**ï¼šè´Ÿè´£æ•°æ®åˆ†æå’Œæ¨¡å¼è¯†åˆ«
- **ç­–ç•¥èŠ‚ç‚¹**ï¼šåˆ¶å®šè¡ŒåŠ¨ç­–ç•¥å’Œè®¡åˆ’
- **è¯„ä¼°èŠ‚ç‚¹**ï¼šé£é™©è¯„ä¼°å’Œè´¨é‡æ§åˆ¶
- **èµ„æºèŠ‚ç‚¹**ï¼šèµ„æºåˆ†é…å’Œä¼˜åŒ–
- **å†³ç­–èŠ‚ç‚¹**ï¼šæœ€ç»ˆå†³ç­–å’Œæ‰§è¡Œ

### 3. çŠ¶æ€ç®¡ç†ç³»ç»Ÿ
- èŠ‚ç‚¹çŠ¶æ€è¿½è¸ª
- å†å²ä¿¡æ¯è®°å½•
- çŠ¶æ€æ›´æ–°å’ŒéªŒè¯
- ç½®ä¿¡åº¦è¯„åˆ†

### 4. èµ„æºç®¡ç†
- èƒ½é‡ç®¡ç†
- ä»¤ç‰Œæ§åˆ¶
- æ—¶é—´é™åˆ¶
- çŸ¥è¯†å‚¨å¤‡

## ğŸ“¦ å®‰è£…

```bash
# åŸºç¡€å®‰è£…
pip install sandgraph

# å¼€å‘å®‰è£…
git clone https://github.com/NoakLiu/sandgraph.git
cd sandgraph
pip install -e ".[dev]"
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºç®€å•å·¥ä½œæµ

```python
from sandgraph import SG_Workflow, NodeType, WorkflowMode
from sandgraph.core.llm_interface import create_shared_llm_manager
from sandgraph.sandbox_implementations import Game24Sandbox

# 1. åˆ›å»ºLLMç®¡ç†å™¨
llm_manager = create_shared_llm_manager("demo_llm")

# 2. åˆ›å»ºå·¥ä½œæµ
workflow = SG_Workflow("demo_workflow", WorkflowMode.TRADITIONAL, llm_manager)

# 3. æ·»åŠ èŠ‚ç‚¹
# 3.1 æ·»åŠ è¾“å…¥èŠ‚ç‚¹
workflow.add_node(NodeType.INPUT, "start")

# 3.2 æ·»åŠ LLMåˆ†æèŠ‚ç‚¹
workflow.add_node(NodeType.LLM, "analyzer", {
    "role": "åˆ†æå™¨",
    "reasoning_type": "analytical"
})

# 3.3 æ·»åŠ æ²™ç›’èŠ‚ç‚¹
workflow.add_node(NodeType.SANDBOX, "game_sandbox", {
    "sandbox": Game24Sandbox(),
    "max_visits": 3
})

# 3.4 æ·»åŠ è¾“å‡ºèŠ‚ç‚¹
workflow.add_node(NodeType.OUTPUT, "end")

# 4. æ·»åŠ è¾¹
workflow.add_edge("start", "analyzer")
workflow.add_edge("analyzer", "game_sandbox")
workflow.add_edge("game_sandbox", "end")

# 5. æ‰§è¡Œå·¥ä½œæµ
result = workflow.execute_full_workflow(max_steps=10)
```

### 2. æ ‡å‡†è¾“å‡ºç»“æœ

```
============================================================
 ä¼ ç»Ÿå·¥ä½œæµæ¨¡å¼æ¼”ç¤º
============================================================

åˆ›å»ºä¼ ç»Ÿå·¥ä½œæµå›¾: demo_workflow
æ¨¡å¼: TRADITIONAL
èŠ‚ç‚¹æ•°: 4
è¾¹æ•°: 3

----------------------------------------
 åˆå§‹æ¸¸æˆçŠ¶æ€
----------------------------------------
èµ„æº: {'energy': 100, 'tokens': 50, 'time': 300, 'knowledge': 100}
å¯æ‰§è¡ŒèŠ‚ç‚¹: ['start']

----------------------------------------
 æ‰§è¡Œå·¥ä½œæµ
----------------------------------------
æ‰§è¡Œå®Œæˆ:
- æ€»æ­¥éª¤: 4
- æ‰§è¡Œæ—¶é—´: 2.35ç§’
- æœ€ç»ˆå¾—åˆ†: 0.85
- å‰©ä½™èµ„æº: {'energy': 75, 'tokens': 35, 'time': 285, 'knowledge': 95}
- å®ŒæˆèŠ‚ç‚¹æ•°: 4

----------------------------------------
 èŠ‚ç‚¹æ‰§è¡Œè¯¦æƒ…
----------------------------------------
1. startèŠ‚ç‚¹:
   - çŠ¶æ€: å®Œæˆ
   - æ‰§è¡Œæ—¶é—´: 0.05ç§’
   - èµ„æºæ¶ˆè€—: {'energy': 5, 'tokens': 2}

2. analyzerèŠ‚ç‚¹:
   - çŠ¶æ€: å®Œæˆ
   - æ‰§è¡Œæ—¶é—´: 0.85ç§’
   - èµ„æºæ¶ˆè€—: {'energy': 10, 'tokens': 8}
   - ç½®ä¿¡åº¦: 0.92

3. game_sandboxèŠ‚ç‚¹:
   - çŠ¶æ€: å®Œæˆ
   - æ‰§è¡Œæ—¶é—´: 1.20ç§’
   - èµ„æºæ¶ˆè€—: {'energy': 15, 'tokens': 10}
   - å¾—åˆ†: 0.85

4. endèŠ‚ç‚¹:
   - çŠ¶æ€: å®Œæˆ
   - æ‰§è¡Œæ—¶é—´: 0.25ç§’
   - èµ„æºæ¶ˆè€—: {'energy': 5, 'tokens': 5}
```

### 3. åˆ›å»ºåŠ¨æ€æ¸¸æˆç³»ç»Ÿ

```python
from sandgraph import create_dynamic_game_graph

# åˆ›å»ºåŠ¨æ€æ¸¸æˆå›¾
game_graph = create_dynamic_game_graph(llm_manager)

# æ‰§è¡Œæ¸¸æˆ
result = game_graph.execute()
```

### 4. é‡åŒ–äº¤æ˜“ç³»ç»Ÿ
- å¸‚åœºæ•°æ®åˆ†æ
- äº¤æ˜“ç­–ç•¥ç”Ÿæˆ
- å®æ—¶äº¤æ˜“æ‰§è¡Œ
- é£é™©æ§åˆ¶
- æŠ•èµ„ç»„åˆç®¡ç†

#### 4.1 äº¤æ˜“ç¯å¢ƒé›†æˆ
SandGraph æä¾›äº†ä¸ Trading Gym å’Œ Backtrader çš„é›†æˆï¼Œæ”¯æŒï¼š
- å®æ—¶å¸‚åœºæ•°æ®è·å–ï¼ˆYahoo Finance, Alpacaï¼‰
- äº¤æ˜“æ‰§è¡Œå’Œå›æµ‹
- æŠ•èµ„ç»„åˆç®¡ç†
- é£é™©æ§åˆ¶
- æ€§èƒ½è¯„ä¼°

ä½¿ç”¨ç¤ºä¾‹ï¼š
```python
from sandgraph import SG_Workflow, NodeType, WorkflowMode
from sandgraph.core.llm_interface import create_shared_llm_manager
from sandgraph.sandbox_implementations import BacktraderSandbox
from datetime import datetime, timedelta

# åˆ›å»ºLLMç®¡ç†å™¨
llm_manager = create_shared_llm_manager("trading_llm")

# åˆ›å»ºå·¥ä½œæµ
workflow = SG_Workflow("trading_workflow", WorkflowMode.TRADITIONAL, llm_manager)

# æ·»åŠ äº¤æ˜“æ‰§è¡ŒèŠ‚ç‚¹
workflow.add_node(NodeType.SANDBOX, "trading_executor", {
    "sandbox": BacktraderSandbox(
        initial_cash=100000.0,
        commission=0.001,
        data_source="yahoo",
        symbols=["AAPL", "GOOGL", "MSFT", "AMZN"],
        start_date=(datetime.now() - timedelta(days=365)).strftime("%Y-%m-%d"),
        end_date=datetime.now().strftime("%Y-%m-%d")
    ),
    "max_visits": 5
})

# æ‰§è¡Œå·¥ä½œæµ
result = workflow.execute_full_workflow(max_steps=10)
```

#### 4.2 äº¤æ˜“åŠŸèƒ½
- **å¸‚åœºæ•°æ®**ï¼šæ”¯æŒå®æ—¶å’Œå†å²å¸‚åœºæ•°æ®è·å–
- **äº¤æ˜“æ‰§è¡Œ**ï¼šæ”¯æŒå¸‚ä»·å•ã€é™ä»·å•ç­‰äº¤æ˜“ç±»å‹
- **æŠ•èµ„ç»„åˆ**ï¼šæ”¯æŒå¤šèµ„äº§ç»„åˆç®¡ç†
- **é£é™©æ§åˆ¶**ï¼šæ”¯æŒæ­¢æŸã€ä»“ä½æ§åˆ¶ç­‰é£é™©ç®¡ç†
- **æ€§èƒ½è¯„ä¼°**ï¼šæ”¯æŒå¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰æŒ‡æ ‡è®¡ç®—

#### 4.3 æ•°æ®æºæ”¯æŒ
- Yahoo Finance
- Alpaca Trading API
- è‡ªå®šä¹‰æ•°æ®æº

#### 4.4 äº¤æ˜“ç­–ç•¥
- è¶‹åŠ¿è·Ÿè¸ª
- å‡å€¼å›å½’
- å¥—åˆ©ç­–ç•¥
- æœºå™¨å­¦ä¹ ç­–ç•¥

#### 4.5 Backtrader é›†æˆ
SandGraph é›†æˆäº† Backtrader æ¡†æ¶ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
- **å†å²æ•°æ®å›æµ‹**ï¼šæ”¯æŒå¤šå‘¨æœŸã€å¤šèµ„äº§å›æµ‹
- **å®æ—¶äº¤æ˜“**ï¼šæ”¯æŒå®æ—¶å¸‚åœºæ•°æ®äº¤æ˜“
- **å¤šç­–ç•¥ç»„åˆ**ï¼šæ”¯æŒå¤šä¸ªäº¤æ˜“ç­–ç•¥çš„ç»„åˆ
- **æ€§èƒ½åˆ†æ**ï¼šå†…ç½®å¤šç§æ€§èƒ½åˆ†ææŒ‡æ ‡
  - å¤æ™®æ¯”ç‡
  - æœ€å¤§å›æ’¤
  - å¹´åŒ–æ”¶ç›Šç‡
  - äº¤æ˜“ç»Ÿè®¡
- **å¯è§†åŒ–**ï¼šæ”¯æŒäº¤æ˜“ç»“æœå¯è§†åŒ–
  - èµ„äº§æ›²çº¿
  - äº¤æ˜“ç‚¹ä½
  - æŠ€æœ¯æŒ‡æ ‡
  - æ€§èƒ½æŒ‡æ ‡

ä½¿ç”¨ Backtrader çš„ç¤ºä¾‹ï¼š
```python
from sandgraph.sandbox_implementations import BacktraderSandbox

# åˆ›å»º Backtrader æ²™ç›’
sandbox = BacktraderSandbox(
    initial_cash=100000.0,
    commission=0.001,
    data_source="yahoo",
    symbols=["AAPL", "GOOGL", "MSFT", "AMZN"],
    start_date="2023-01-01",
    end_date="2023-12-31"
)

# æ‰§è¡Œå›æµ‹
result = sandbox.execute_backtest()
print(f"å›æµ‹ç»“æœï¼š\n{result}")
```

#### 4.6 å‘½ä»¤è¡Œä½¿ç”¨
SandGraph æä¾›äº†å‘½ä»¤è¡Œå·¥å…·æ¥è¿è¡Œäº¤æ˜“æ¼”ç¤ºï¼š

1. ä½¿ç”¨ Backtrader ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰ï¼š
```bash
python trading_demo.py
```

2. ä½¿ç”¨ TradingGym ç­–ç•¥ï¼š
```bash
python trading_demo.py --strategy trading_gym
```

3. æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š
```bash
python trading_demo.py --help
```

è¾“å‡ºï¼š
```
usage: trading_demo.py [-h] [--strategy {trading_gym,backtrader}]

SandGraph äº¤æ˜“ç¯å¢ƒæ¼”ç¤º

options:
  -h, --help            æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º
  --strategy {trading_gym,backtrader}
                        é€‰æ‹©äº¤æ˜“ç­–ç•¥ç±»å‹ (trading_gym æˆ– backtrader)
```

4. å¼€å‘ç¯å¢ƒå®‰è£…å’Œè¿è¡Œï¼š
```bash
# å®‰è£…å¼€å‘ç‰ˆæœ¬
pip install -e ".[dev]"

# è¿è¡Œæ¼”ç¤º
python trading_demo.py --strategy backtrader  # ä½¿ç”¨ Backtrader
# æˆ–
python trading_demo.py --strategy trading_gym  # ä½¿ç”¨ TradingGym
```

#### 4.7 æ€§èƒ½æŒ‡æ ‡
- **æ”¶ç›ŠæŒ‡æ ‡**
  - æ€»æ”¶ç›Šç‡
  - å¹´åŒ–æ”¶ç›Šç‡
  - æœˆåº¦æ”¶ç›Šç‡
  - èƒœç‡
- **é£é™©æŒ‡æ ‡**
  - å¤æ™®æ¯”ç‡
  - æœ€å¤§å›æ’¤
  - æ³¢åŠ¨ç‡
  - ä¿¡æ¯æ¯”ç‡
- **äº¤æ˜“æŒ‡æ ‡**
  - äº¤æ˜“æ¬¡æ•°
  - å¹³å‡æŒä»“æ—¶é—´
  - ç›ˆäºæ¯”
  - æ‰‹ç»­è´¹æˆæœ¬

## ğŸ“š ç¤ºä¾‹åœºæ™¯

### 1. æ¸¸æˆåˆ†æç³»ç»Ÿ
- å¸‚åœºæ¨¡å¼è¯†åˆ«
- ç­–ç•¥è§„åˆ’
- é£é™©è¯„ä¼°
- èµ„æºä¼˜åŒ–

### 2. å¤šæ™ºèƒ½ä½“åä½œ
- ä»»åŠ¡åˆ†è§£
- å¹¶è¡Œæ‰§è¡Œ
- ç»“æœèšåˆ
- è´¨é‡è¯„ä¼°

### 3. åŠ¨æ€å†³ç­–ç³»ç»Ÿ
- çŠ¶æ€åˆ†æ
- ç­–ç•¥ç”Ÿæˆ
- é£é™©è¯„ä¼°
- å†³ç­–æ‰§è¡Œ

### 4. é‡åŒ–äº¤æ˜“ç³»ç»Ÿ
- å¸‚åœºæ•°æ®åˆ†æ
- äº¤æ˜“ç­–ç•¥ç”Ÿæˆ
- å®æ—¶äº¤æ˜“æ‰§è¡Œ
- é£é™©æ§åˆ¶
- æŠ•èµ„ç»„åˆç®¡ç†

#### 4.1 äº¤æ˜“ç¯å¢ƒé›†æˆ
SandGraph æä¾›äº†ä¸ Trading Gym å’Œ Backtrader çš„é›†æˆï¼Œæ”¯æŒï¼š
- å®æ—¶å¸‚åœºæ•°æ®è·å–ï¼ˆYahoo Finance, Alpacaï¼‰
- äº¤æ˜“æ‰§è¡Œå’Œå›æµ‹
- æŠ•èµ„ç»„åˆç®¡ç†
- é£é™©æ§åˆ¶
- æ€§èƒ½è¯„ä¼°

ä½¿ç”¨ç¤ºä¾‹ï¼š
```python
from sandgraph import SG_Workflow, NodeType, WorkflowMode
from sandgraph.core.llm_interface import create_shared_llm_manager
from sandgraph.sandbox_implementations import BacktraderSandbox
from datetime import datetime, timedelta

# åˆ›å»ºLLMç®¡ç†å™¨
llm_manager = create_shared_llm_manager("trading_llm")

# åˆ›å»ºå·¥ä½œæµ
workflow = SG_Workflow("trading_workflow", WorkflowMode.TRADITIONAL, llm_manager)

# æ·»åŠ äº¤æ˜“æ‰§è¡ŒèŠ‚ç‚¹
workflow.add_node(NodeType.SANDBOX, "trading_executor", {
    "sandbox": BacktraderSandbox(
        initial_cash=100000.0,
        commission=0.001,
        data_source="yahoo",
        symbols=["AAPL", "GOOGL", "MSFT", "AMZN"],
        start_date=(datetime.now() - timedelta(days=365)).strftime("%Y-%m-%d"),
        end_date=datetime.now().strftime("%Y-%m-%d")
    ),
    "max_visits": 5
})

# æ‰§è¡Œå·¥ä½œæµ
result = workflow.execute_full_workflow(max_steps=10)
```

#### 4.2 äº¤æ˜“åŠŸèƒ½
- **å¸‚åœºæ•°æ®**ï¼šæ”¯æŒå®æ—¶å’Œå†å²å¸‚åœºæ•°æ®è·å–
- **äº¤æ˜“æ‰§è¡Œ**ï¼šæ”¯æŒå¸‚ä»·å•ã€é™ä»·å•ç­‰äº¤æ˜“ç±»å‹
- **æŠ•èµ„ç»„åˆ**ï¼šæ”¯æŒå¤šèµ„äº§ç»„åˆç®¡ç†
- **é£é™©æ§åˆ¶**ï¼šæ”¯æŒæ­¢æŸã€ä»“ä½æ§åˆ¶ç­‰é£é™©ç®¡ç†
- **æ€§èƒ½è¯„ä¼°**ï¼šæ”¯æŒå¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰æŒ‡æ ‡è®¡ç®—

#### 4.3 æ•°æ®æºæ”¯æŒ
- Yahoo Finance
- Alpaca Trading API
- è‡ªå®šä¹‰æ•°æ®æº

#### 4.4 äº¤æ˜“ç­–ç•¥
- è¶‹åŠ¿è·Ÿè¸ª
- å‡å€¼å›å½’
- å¥—åˆ©ç­–ç•¥
- æœºå™¨å­¦ä¹ ç­–ç•¥

#### 4.5 Backtrader é›†æˆ
SandGraph é›†æˆäº† Backtrader æ¡†æ¶ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
- **å†å²æ•°æ®å›æµ‹**ï¼šæ”¯æŒå¤šå‘¨æœŸã€å¤šèµ„äº§å›æµ‹
- **å®æ—¶äº¤æ˜“**ï¼šæ”¯æŒå®æ—¶å¸‚åœºæ•°æ®äº¤æ˜“
- **å¤šç­–ç•¥ç»„åˆ**ï¼šæ”¯æŒå¤šä¸ªäº¤æ˜“ç­–ç•¥çš„ç»„åˆ
- **æ€§èƒ½åˆ†æ**ï¼šå†…ç½®å¤šç§æ€§èƒ½åˆ†ææŒ‡æ ‡
  - å¤æ™®æ¯”ç‡
  - æœ€å¤§å›æ’¤
  - å¹´åŒ–æ”¶ç›Šç‡
  - äº¤æ˜“ç»Ÿè®¡
- **å¯è§†åŒ–**ï¼šæ”¯æŒäº¤æ˜“ç»“æœå¯è§†åŒ–
  - èµ„äº§æ›²çº¿
  - äº¤æ˜“ç‚¹ä½
  - æŠ€æœ¯æŒ‡æ ‡
  - æ€§èƒ½æŒ‡æ ‡

ä½¿ç”¨ Backtrader çš„ç¤ºä¾‹ï¼š
```python
from sandgraph.sandbox_implementations import BacktraderSandbox

# åˆ›å»º Backtrader æ²™ç›’
sandbox = BacktraderSandbox(
    initial_cash=100000.0,
    commission=0.001,
    data_source="yahoo",
    symbols=["AAPL", "GOOGL", "MSFT", "AMZN"],
    start_date="2023-01-01",
    end_date="2023-12-31"
)

# æ‰§è¡Œå›æµ‹
result = sandbox.execute_backtest()
print(f"å›æµ‹ç»“æœï¼š\n{result}")
```

#### 4.6 æ€§èƒ½æŒ‡æ ‡
- **æ”¶ç›ŠæŒ‡æ ‡**
  - æ€»æ”¶ç›Šç‡
  - å¹´åŒ–æ”¶ç›Šç‡
  - æœˆåº¦æ”¶ç›Šç‡
  - èƒœç‡
- **é£é™©æŒ‡æ ‡**
  - å¤æ™®æ¯”ç‡
  - æœ€å¤§å›æ’¤
  - æ³¢åŠ¨ç‡
  - ä¿¡æ¯æ¯”ç‡
- **äº¤æ˜“æŒ‡æ ‡**
  - äº¤æ˜“æ¬¡æ•°
  - å¹³å‡æŒä»“æ—¶é—´
  - ç›ˆäºæ¯”
  - æ‰‹ç»­è´¹æˆæœ¬

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°èŠ‚ç‚¹ç±»å‹
1. å®šä¹‰èŠ‚ç‚¹å±æ€§
2. å®ç°çŠ¶æ€æ›´æ–°é€»è¾‘
3. æ³¨å†Œåˆ°å·¥ä½œæµç³»ç»Ÿ

### è‡ªå®šä¹‰å·¥ä½œæµ
1. å®šä¹‰èŠ‚ç‚¹ç»“æ„
2. è®¾ç½®èŠ‚ç‚¹ä¾èµ–
3. é…ç½®æ‰§è¡Œå‚æ•°

## ğŸ“ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Pull Requests å’Œ Issuesï¼è¯·ç¡®ä¿ï¼š
1. ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
2. æ·»åŠ é€‚å½“çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

MIT License
## ğŸ¤ è”ç³»æ–¹å¼

- é‚®ä»¶è”ç³» - dong.liu.dl2367@yale.edu
